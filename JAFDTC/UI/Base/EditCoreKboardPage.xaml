<?xml version="1.0" encoding="utf-8"?>
<!--
**********************************************************************************************************************
    
EditCoreKboardPage.xaml : ui xaml for general kneeboard builder editor page

Copyright(C) 2026 ilominar/raven

This program is free software: you can redistribute it and/or modify it under the terms of the GNU General
Public License as published by the Free Software Foundation, either version 3 of the License, or (at your
option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the
implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
for more details.
You should have received a copy of the GNU General Public License along with this program.  If not, see
https://www.gnu.org/licenses/.

**********************************************************************************************************************
-->
<ui_base:SystemEditorPageBase
    x:Class="JAFDTC.UI.Base.EditCoreKboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:JAFDTC.UI.Base"
    xmlns:ui_base="using:JAFDTC.UI.Base"
    xmlns:ui_ctrl="using:JAFDTC.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!--
        ===============================================================================================================
        merge setup 
        ===============================================================================================================
        -->

        <!-- base tape template -->
        <TextBlock Grid.Row="0" Margin="12,12,12,0"
                   Style="{StaticResource EditorTitleTextBlockStyle}">
            Kneeboard Template Package:
        </TextBlock>
        <Grid Grid.Row="1" Margin="24,0,12,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <ComboBox Grid.Row="0" Grid.Column="0" x:Name="uiComboTemplate"
                      Margin="0,12,0,0" HorizontalAlignment="Stretch"
                      SelectionChanged="ComboTemplate_SelectionChanged"
                      ToolTipService.ToolTip="Select kneeboard template package to use when building the kneeboards"/>
            <Button Grid.Row="0" Grid.Column="1" x:Name="uiBtnAddTmplt"
                    Margin="12,12,0,0" VerticalAlignment="Center"
                    Click="BtnAddTmplt_Click"
                    ToolTipService.ToolTip="Import a .zip file for use as a kneeboard template package for the current airframe">
                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE896;"/>
            </Button>
            <Button Grid.Row="0" Grid.Column="2" x:Name="uiBtnDelTmplt"
                    Margin="6,12,0,0" VerticalAlignment="Center"
                    Click="BtnDelTmplt_Click"
                    ToolTipService.ToolTip="Delete the selected kneeboard template package">
                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE74D;"/>
            </Button>
        </Grid>

        <!-- merged systems grid -->
        <TextBlock Grid.Row="2" Margin="12,12,12,0"
                   Style="{StaticResource EditorTitleTextBlockStyle}">
            Kneeboards to Generate:
        </TextBlock>
        <GridView Grid.Row="3" x:Name="uiGridSystemItems"
                  Margin="12,12,12,0" HorizontalAlignment="Center"
                  SelectionMode="None">
            <GridView.ItemTemplate>
                <DataTemplate x:DataType="local:SystemGridItem">
                    <StackPanel Margin="0,0,2,0">
                        <ToggleButton Width="240" Tag="{x:Bind Tag}" IsChecked="{x:Bind IsChecked, Mode=TwoWay}"
                                      Click="BtnSystemItem_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <FontIcon Grid.Column="0" Margin="0,0,12,0"
                                          FontFamily="Segoe Fluent Icons"
                                          FontSize="20"
                                          Glyph="{x:Bind Glyph}"/>
                                <TextBlock Grid.Column="1" VerticalAlignment="center" Text="{x:Bind Name}"/>
                            </Grid>
                        </ToggleButton>
                    </StackPanel>
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView>

        <!-- output -->
        <TextBlock Grid.Row="4" Margin="12,-2,12,0"
                   Style="{StaticResource EditorTitleTextBlockStyle}">
            Location to Save Kneeboards:
        </TextBlock>
        <Grid Grid.Row="5" Margin="24,0,12,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBox Grid.Row="0" Grid.Column="0" x:Name="uiValueOutput"
                     Margin="0,12,0,0" HorizontalAlignment="Stretch"
                     Text="{x:Bind EditKboard.OutputPath, Mode=TwoWay}"
                     IsEnabled="False"
                     PlaceholderText="No save location set for generated kneeboards"/>
            <Button Grid.Row="0" Grid.Column="1" x:Name="uiBtnSetOutput"
                    Margin="12,12,0,0" VerticalAlignment="Center"
                    Click="BtnSetOutput_Click"
                    ToolTipService.ToolTip="Select the save path for the generated kneeboards and builds them">
                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE74E;"/>
            </Button>
            <Button Grid.Row="0" Grid.Column="2" x:Name="uiBtnClearOutput"
                    Margin="6,12,0,0" VerticalAlignment="Center"
                    Click="BtnClearOutput_Click"
                    ToolTipService.ToolTip="Clear the save path for the generated kneeboards">
                <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE894;"/>
            </Button>
        </Grid>

        <StackPanel Grid.Row="6" Margin="24,12,24,0">
            <TextBlock Style="{StaticResource TableHeaderTextStyle}"
                       TextWrapping="Wrap">
                Specifies the path to save the generated kneeboards at, typically in saved games directory for DCS.
                Note that DCS only scans this directory at launch, so generation must be done prior to DCS launch
                for the kneeboards to be available.
            </TextBlock>
        </StackPanel>

        <!-- behavior -->
        <TextBlock Grid.Row="7" Margin="12,12,12,0"
                   Style="{StaticResource EditorTitleTextBlockStyle}">
            Behaviors:
        </TextBlock>

        <CheckBox Grid.Row="8" Tag="EnableRebuild" x:Name="uiCkbxEnableRebuild"
                  Margin="24,6,24,0" HorizontalAlignment="Left"
                  Click="CheckBox_Clicked">
            JAFDTC always rebuilds the generated kneeboards when a system providing content changes
        </CheckBox>
        <CheckBox Grid.Row="9" Tag="EnableNight" x:Name="uiCkbxEnableNight"
                  Margin="24,0,24,0" HorizontalAlignment="Left"
                  Click="CheckBox_Clicked">
            Generate kneeboards in night mode (when available in the template)
        </CheckBox>
        <CheckBox Grid.Row="10" Tag="EnableSVG" x:Name="uiCkbxEnableSVG"
                  Margin="24,0,24,0" HorizontalAlignment="Left"
                  Click="CheckBox_Clicked">
            Generate kneeboards in SVG format to allow additional editing outside JAFDTC
        </CheckBox>

        <!--
        ===============================================================================================================
        common editor controls 
        ===============================================================================================================
        -->
        <ui_ctrl:LinkResetBtnsControl Grid.Row="12" Grid.Column="0" Margin="0,0,0,0" x:Name="uiCtlLinkResetBtns"/>

    </Grid>
</ui_base:SystemEditorPageBase>
